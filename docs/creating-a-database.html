<!DOCTYPE html>
<html lang="en-us" xml:lang="en-us">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Creating a Database | Spatial SQL</title>
  <meta name="description" content="3 Creating a Database | Spatial SQL" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Creating a Database | Spatial SQL" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/Spatial_SQL" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Creating a Database | Spatial SQL" />
  
  
  

<meta name="author" content="Michele Tobias" />
<meta name="author" content="Naomi Kalman" />


<meta name="date" content="2024-03-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="load-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Spatial SQL</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#workshop-description"><i class="fa fa-check"></i><b>0.1</b> Workshop Description</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i><b>0.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>0.1.2</b> Prerequisites</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="concepts.html"><a href="concepts.html"><i class="fa fa-check"></i><b>1</b> Concepts</a>
<ul>
<li class="chapter" data-level="1.1" data-path="concepts.html"><a href="concepts.html#what-is-a-relational-database"><i class="fa fa-check"></i><b>1.1</b> What is a relational database?</a></li>
<li class="chapter" data-level="1.2" data-path="concepts.html"><a href="concepts.html#what-is-a-spatial-database"><i class="fa fa-check"></i><b>1.2</b> What is a Spatial Database?</a></li>
<li class="chapter" data-level="1.3" data-path="concepts.html"><a href="concepts.html#what-is-spatial-sql"><i class="fa fa-check"></i><b>1.3</b> What is Spatial SQL?</a></li>
<li class="chapter" data-level="1.4" data-path="concepts.html"><a href="concepts.html#why-should-you-learn-to-work-with-spatial-databases-and-spatial-sql"><i class="fa fa-check"></i><b>1.4</b> Why should you learn to work with spatial databases and spatial SQL?</a></li>
<li class="chapter" data-level="1.5" data-path="concepts.html"><a href="concepts.html#what-makes-this-challenging"><i class="fa fa-check"></i><b>1.5</b> What makes this challenging?</a></li>
<li class="chapter" data-level="1.6" data-path="concepts.html"><a href="concepts.html#databases-that-support-spatial-sql"><i class="fa fa-check"></i><b>1.6</b> Databases that support Spatial SQL:</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a></li>
<li class="chapter" data-level="3" data-path="creating-a-database.html"><a href="creating-a-database.html"><i class="fa fa-check"></i><b>3</b> Creating a Database</a>
<ul>
<li class="chapter" data-level="3.1" data-path="creating-a-database.html"><a href="creating-a-database.html#start-qgis"><i class="fa fa-check"></i><b>3.1</b> Start QGIS</a></li>
<li class="chapter" data-level="3.2" data-path="creating-a-database.html"><a href="creating-a-database.html#starting-the-db-manager-plugin"><i class="fa fa-check"></i><b>3.2</b> Starting the DB Manager Plugin</a></li>
<li class="chapter" data-level="3.3" data-path="creating-a-database.html"><a href="creating-a-database.html#make-a-database"><i class="fa fa-check"></i><b>3.3</b> Make a Database</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="load-data.html"><a href="load-data.html"><i class="fa fa-check"></i><b>4</b> Load Data</a></li>
<li class="chapter" data-level="5" data-path="sql-window.html"><a href="sql-window.html"><i class="fa fa-check"></i><b>5</b> SQL Window</a></li>
<li class="chapter" data-level="6" data-path="review-non-spatial-queries.html"><a href="review-non-spatial-queries.html"><i class="fa fa-check"></i><b>6</b> Review Non-spatial Queries</a>
<ul>
<li class="chapter" data-level="6.1" data-path="review-non-spatial-queries.html"><a href="review-non-spatial-queries.html#lets-look-at-the-whole-table"><i class="fa fa-check"></i><b>6.1</b> Let’s look at the whole table:</a></li>
<li class="chapter" data-level="6.2" data-path="review-non-spatial-queries.html"><a href="review-non-spatial-queries.html#add-a-where-clause"><i class="fa fa-check"></i><b>6.2</b> Add a WHERE clause:</a></li>
<li class="chapter" data-level="6.3" data-path="review-non-spatial-queries.html"><a href="review-non-spatial-queries.html#add-a-function"><i class="fa fa-check"></i><b>6.3</b> Add a function:</a></li>
<li class="chapter" data-level="6.4" data-path="review-non-spatial-queries.html"><a href="review-non-spatial-queries.html#summarize-data"><i class="fa fa-check"></i><b>6.4</b> Summarize Data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="spatial-queries.html"><a href="spatial-queries.html"><i class="fa fa-check"></i><b>7</b> Spatial Queries</a>
<ul>
<li class="chapter" data-level="7.1" data-path="spatial-queries.html"><a href="spatial-queries.html#basic-spatial-query-examples"><i class="fa fa-check"></i><b>7.1</b> Basic Spatial Query Examples:</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="spatial-queries.html"><a href="spatial-queries.html#view-geometry"><i class="fa fa-check"></i><b>7.1.1</b> View Geometry</a></li>
<li class="chapter" data-level="7.1.2" data-path="spatial-queries.html"><a href="spatial-queries.html#length"><i class="fa fa-check"></i><b>7.1.2</b> Length</a></li>
<li class="chapter" data-level="7.1.3" data-path="spatial-queries.html"><a href="spatial-queries.html#area"><i class="fa fa-check"></i><b>7.1.3</b> Area</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="spatial-queries.html"><a href="spatial-queries.html#projections"><i class="fa fa-check"></i><b>7.2</b> Projections:</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="spatial-queries.html"><a href="spatial-queries.html#set-the-projection"><i class="fa fa-check"></i><b>7.2.1</b> Set the Projection</a></li>
<li class="chapter" data-level="7.2.2" data-path="spatial-queries.html"><a href="spatial-queries.html#reproject"><i class="fa fa-check"></i><b>7.2.2</b> Reproject</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="spatial-queries.html"><a href="spatial-queries.html#spatial-join"><i class="fa fa-check"></i><b>7.3</b> Spatial Join</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="viewing-a-query-to-qgis.html"><a href="viewing-a-query-to-qgis.html"><i class="fa fa-check"></i><b>8</b> Viewing a Query to QGIS</a></li>
<li class="chapter" data-level="9" data-path="spatial-analysis.html"><a href="spatial-analysis.html"><i class="fa fa-check"></i><b>9</b> Spatial Analysis</a>
<ul>
<li class="chapter" data-level="9.0.1" data-path="spatial-analysis.html"><a href="spatial-analysis.html#distance"><i class="fa fa-check"></i><b>9.0.1</b> Distance</a></li>
<li class="chapter" data-level="9.0.2" data-path="spatial-analysis.html"><a href="spatial-analysis.html#buffer-nesting-functions"><i class="fa fa-check"></i><b>9.0.2</b> Buffer &amp; Nesting Functions</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>10</b> Conclusion</a></li>
<li class="chapter" data-level="11" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i><b>11</b> Additional Resources:</a>
<ul>
<li class="chapter" data-level="11.1" data-path="additional-resources.html"><a href="additional-resources.html#more-about-databases-with-datalab"><i class="fa fa-check"></i><b>11.1</b> More about Databases with DataLab</a></li>
<li class="chapter" data-level="11.2" data-path="additional-resources.html"><a href="additional-resources.html#general-sql-resources"><i class="fa fa-check"></i><b>11.2</b> General SQL Resources:</a></li>
<li class="chapter" data-level="11.3" data-path="additional-resources.html"><a href="additional-resources.html#spatial-sql-resources"><i class="fa fa-check"></i><b>11.3</b> Spatial SQL Resources:</a></li>
<li class="chapter" data-level="11.4" data-path="additional-resources.html"><a href="additional-resources.html#general-slides-tutorials"><i class="fa fa-check"></i><b>11.4</b> General Slides &amp; Tutorials:</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="assessment.html"><a href="assessment.html"><i class="fa fa-check"></i><b>12</b> Assessment</a></li>
<li class="divider"></li>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg" style="float: right; padding-right: 10px;" />
</a>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spatial SQL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="creating-a-database" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Creating a Database<a href="creating-a-database.html#creating-a-database" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="start-qgis" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Start QGIS<a href="creating-a-database.html#start-qgis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Open QGIS. Start a new project by either clicking on the white rectangle icon (with the corner turned down) or selecting “new” under the Project menu. You now should have a blank map canvas ready to go.</p>
</div>
<div id="starting-the-db-manager-plugin" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Starting the DB Manager Plugin<a href="creating-a-database.html#starting-the-db-manager-plugin" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’ll be using the DB Manager plugin, so let’s make sure that is installed:</p>
<ol style="list-style-type: decimal">
<li><p>Click the Database menu at the top of the QGIS window. Do you have the DB Manager listed as an option in this menu? If so, click the icon to open the tool and skip Step 2 below. If not, move on to Step 2 below.</p></li>
<li><p>If the DB Manager is not in the Database menu, we need to enable the plug in:</p>
<ol style="list-style-type: lower-roman">
<li>Click the Plugins menu at the top of the window and select “Manage and install plugins”. This will open the Plugins Manager.<br />
</li>
<li>Make sure you’re in the “All” tab on the left side of the tool, and then in the search box, start typing “DB Manager” to narrow down the options.<br />
</li>
<li>Select “DB Manager” from the list to view the details about this plugin.<br />
</li>
<li>Click the <em>Install Plugin</em> button in the lower right corner to install it. If this option isn’t available, the tool is probably already installed and you just need to make sure the box next to the tool in the list is checked so that is available. Now go back to Step 1 above to start the tool.</li>
</ol></li>
</ol>
<p><img src="images/QGIS_DBBrowser_StartUp.png" title="DB Manager window on start up" alt="alt text" /></p>
</div>
<div id="make-a-database" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Make a Database<a href="creating-a-database.html#make-a-database" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can think of a database as a folder in which you keep tables that are related to each other. You don’t want to put data in this database that isn’t related to the other data (you could, but that’s not the point of a database).</p>
<p>We’ll need to make a new database to keep our spatial tables in:</p>
<ol style="list-style-type: decimal">
<li>Locate your Browser Panel. By default, it usually sits above or below the Layers Panel on the left side of the Map Canvas. If you’ve closed it (like your instructor tends to do), you can get it back with <em>View</em> Menu –&gt; <em>Panels</em> –&gt; <em>Browser Panel</em></li>
<li>Right click on the SpatiaLite item (it has the feather icon) [alt text](./images/QGIS_Spatialite_Icon.png “the spatial lite icon looks like a feather) and select <em>Create Database</em></li>
<li>Navigate to where you would like to keep your database, perhaps in the folder where you downloaded the data for this workshop. Name your database <em>sfbay.sqlite</em> because we’ll be working with San Francisco Bay data. Yes, it should be all lowercase.</li>
</ol>
<p>You may have noticed that there are many database format options available to you besides SpatiaLite. We’re working with a SpatiaLite file today, but you can match your future databases to the needs of your project. Different database formats have different functions available and can be better for certain types of analysis. For example, PostGIS is great for geocoding and also for working with very large datasets, among other things.</p>
<p>Let’s connect to our database:</p>
<ol style="list-style-type: decimal">
<li>Open or locate the DB Manager that we found earier.</li>
<li>Right click on the <em>SpatiaLite</em> option and select <em>New Connection</em>.</li>
<li>Navigate to where you saved your <em>sfbay.sqlite</em> file, slect the file, and click <em>Open</em>.</li>
<li>Expand the list (click on the &gt; symbol) in the <em>Providers Panel</em> on the left to see that your database is now available.</li>
<li>If you expand the list next to the <em>sfbay.sqlite</em> database, you’ll see if has some tables, but none of these contain data yet. We’ll add some data next.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="load-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/Spatial_SQL/edit/master/03_create_database.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/Spatial_SQL/blob/master/03_create_database.Rmd",
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
